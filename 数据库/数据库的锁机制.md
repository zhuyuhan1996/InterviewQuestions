锁可以分为两类，一类**乐观锁**，一类**悲观锁**，悲观锁就是通常说的数据库锁机制，乐观锁一般是指用户自己实现的一种锁机制。

悲观锁认为数据会随时被修改，所以整个数据处理中需要将数据加锁，悲观锁一般都是依靠关系数据库提供的锁机制。

**共享锁：**读锁，事务A对对象T加S锁，那么其他事务也只能对T加S锁，多个事务可以同时读，但是不能有写操作，直到A释放S锁。

**排它锁：**写锁，事务A对对象T加X锁后，其他事务不能对他加任何锁，只有事务A可以读写对象T直到A释放X锁。

**更新锁：**用来预定要对此对象施加X锁，它允许其他事务读，但不允许再施加U锁或X锁；当被读取对象要被更新时，则升级为X锁，主要是用来防止死锁。

按照功能划分：行锁和表锁。

**乐观锁：**每次自己操作数据的时候认为没有人会来修改它。

既然都有数据库提供的悲观锁可以方便使用为什么要使用乐观锁呢？对于读操作远多于写操作的时候，大多数都是读取，这时候一个更新操作加锁会阻塞所有读取，降低了吞吐量。最后还要释放锁，锁是需要一些开销的，我们只要想办法解决极少量的更新操作的同步问题。

**版本号（记为version）：**就是给数据增加一个版本标识。

**时间戳（timestamp）：**和版本号基本一样，只是通过时间戳来判断而已

**待更新字段：**和版本号方式相似，只是不增加额外字段，直接使用有效数据字段做版本控制信息

**所有字段：**和待更新字段类似，只是使用所有字段做版本控制信息，只有所有字段都没变化才会执行更新